BOOKMARKET

=== WHAT IS IT?
A simple means of using a bookmark to add your javascript to an external page.
Think of your Del.ico.us bookmarking tool - it can be used to save information
to your site from any other site out there. Works with the restful_authentication
plugin.

=== HOW IT WORKS
The bookmark part simply 'injects' a .js file into the page, by adding it to
the HEAD element. Your users will put it in their toolbar, and click on it when
they want to use it.

=== WHAT CAN IT DO?
Anything you want! The default action saves the URL and title of the bookmarked
page, along with a 'description' field. You can go ahead and add functionality to 
parse the page DOM with HPRICOT or anything else.

=== ONLINE DEMO
Coming soon!

=== INSTALLATION
First, you must have a restful_authentication user model. 

=== NOTES
I am building a very basic example of the tool. It can be used for much more
powerful things! You will notice that the URL of the script is a directory,
not a filename. This resolves some cross browser issues. For PHP, just make
a file called index.php and put it in that particular directory. For Rails,
create a controller method that renders the file like this:
render :file => "#{RAILS_ROOT}/public/adder.js"

=== THE BOOKMARK
The bookmark itself is simply a javascript href. Here is an example that's
broken up and commented for easy reading. (NOTE spaces MUST be replaced with %20)

javascript:(            #just like any other javascript href
function() {            #start the function call

var x=document.getElementsByTagName('head').item(0);  #Grab HEAD element
var so=document.createElement('script');              #Create SCRIPT element

var s='http://www.yoursite.com/adder/';             #URL for the JS file
if(typeof so !='object')                            #Make sure you can add it
    so=document.standardCreateElement('script');    #Create script element
    so.setAttribute('src',s);                       #Set src to your site
    so.setAttribute('type','text/javascript');      #Set proper type
    x.appendChild(so);                              #Append it to the HEAD
}
)();                                                #Execute the function

and the whole shebang uninterrupted
javascript:(function()%20{var%20x=document.getElementsByTagName('head').item(0);var%20so=document.createElement('script');var%20s='http://www.yoursite.com/adder/';if(typeof%20so%20!='object')%20so=document.standardCreateElement('script');so.setAttribute('src',s);so.setAttribute('type','text/javascript');x.appendChild(so);})();

=== SETUP
This bookmarker tool works with the excellent Restful Authentication plugin
First, you will need to install restful_authentication and create the user/session model.
 script/plugin install restful_authentication
then
 script/generate authenticated user sessions 
This is nice because it also creates a bunch of tests for you.

